<configuration xmlns:patch="http://www.sitecore.net/xmlconfig/">
  <sitecore>
    <!-- Enhancements for version 3 -->

    <settings>
      <!--
           Brightcove - COMMAND ROUTE PREFIX
           The prefix used for controller routes.
           Default value: sitecore/api/brightcove/
      
      -->
      <setting name="Brightcove.CommandRoutePrefix" value="sitecore/api/brightcove/" />

      <setting name="Brightcove.ImportLimit" value="100" />

      <setting name="Brightcove.TextTracksMimeTypes" value="{application/octet-stream},{text/vtt}" />

      <setting name="Sitecore.MediaFramework.DefaultPlayerSize">
        <patch:attribute name="value">640,360</patch:attribute>
      </setting>

      <setting name="Sitecore.MediaFramework.PreviewSize">
        <patch:attribute name="value">640,360</patch:attribute>
      </setting>

    </settings>

    <commands>
      <command name="mediaFramework:CustomFields:Brightcove" type="AgencyOasis.MediaFramework.Brightcove.Commands.CustomFields,AgencyOasis.MediaFramework.Brightcove"/>
      <command name="mediaFramework:TextTracks:Brightcove" type="AgencyOasis.MediaFramework.Brightcove.Commands.TextTracks,AgencyOasis.MediaFramework.Brightcove"/>
    </commands>
   

    <!--
      Manage uploaded video with media library in sitecore
    -->
    
    <Brightcove.VideoUploadService type="AgencyOasis.MediaFramework.Brightcove.Upload.MediaItem.VideoUploadService, AgencyOasis.MediaFramework.Brightcove">
      <Config type="AgencyOasis.MediaFramework.Brightcove.Upload.VideoUploadServiceConfigBase, AgencyOasis.MediaFramework.Brightcove">
        <CaptureImages>true</CaptureImages>
        <Profile>high-resolution</Profile>
        <AlwaysCreateVideoItem>true</AlwaysCreateVideoItem>
      </Config>
    </Brightcove.VideoUploadService>
    
    <Brightcove.StorageService type="AgencyOasis.MediaFramework.Brightcove.Upload.MediaItem.StorageService, AgencyOasis.MediaFramework.Brightcove">
      <Config type="AgencyOasis.MediaFramework.Brightcove.Upload.MediaItem.StorageServiceConfig, AgencyOasis.MediaFramework.Brightcove">
        <BaseUrl>http://prod.bcscv3.aobrightcove.webstagesite.com</BaseUrl>
        <ContentDatabaseName>master</ContentDatabaseName>
        <PublishDatabaseName>web</PublishDatabaseName>
      </Config>
    </Brightcove.StorageService>

    <pipelines>

      <initialize>
        <processor type="AgencyOasis.MediaFramework.Brightcove.Pipelines.Initialize.RegisterRoutes, AgencyOasis.MediaFramework.Brightcove" />
      </initialize>

      <Brightcove.VideoUpload>
        <processor type="AgencyOasis.MediaFramework.Brightcove.Pipelines.VideoUpload.CreateVideoEntity, AgencyOasis.MediaFramework.Brightcove" />
        <processor type="AgencyOasis.MediaFramework.Brightcove.Pipelines.VideoUpload.PostVideo, AgencyOasis.MediaFramework.Brightcove" />
        <processor type="AgencyOasis.MediaFramework.Brightcove.Pipelines.VideoUpload.SaveVideoContent, AgencyOasis.MediaFramework.Brightcove" />
        <processor type="AgencyOasis.MediaFramework.Brightcove.Pipelines.VideoUpload.CreateIngestVideoEntity, AgencyOasis.MediaFramework.Brightcove" />
        <processor type="AgencyOasis.MediaFramework.Brightcove.Pipelines.VideoUpload.IngestVideo, AgencyOasis.MediaFramework.Brightcove" />
      </Brightcove.VideoUpload>

      <Brightcove.HandleCallback>
        <processor type="AgencyOasis.MediaFramework.Brightcove.Pipelines.HandleCallback.CheckVideoUpload, AgencyOasis.MediaFramework.Brightcove" />
        <processor type="AgencyOasis.MediaFramework.Brightcove.Pipelines.HandleCallback.SetIngestStatus, AgencyOasis.MediaFramework.Brightcove" />
      </Brightcove.HandleCallback>

      <mediaFramework.mediaGenerateMarkup>
        <processor patch:instead="processor[@type='Sitecore.MediaFramework.Pipelines.MediaGenerateMarkup.GetPlaybackEvents, Sitecore.MediaFramework']" type="AgencyOasis.MediaFramework.Brightcove.Pipelines.MediaGenerateMarkup.GetPlaybackEvents,AgencyOasis.MediaFramework.Brightcove">
        </processor>
      </mediaFramework.mediaGenerateMarkup>
    </pipelines>
    
  </sitecore>
</configuration>